
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Teoria sulle Misure Responsive</title>
 

<style>

html {font-size: 100%; scroll-behavior: smooth;  scroll-padding-top: 1rem;}

body {
    display: flex;
justify-content: center;
align-items: center;
width: 100%;
height: 100%;
color: #333;
line-height: 1.3;
background-color: white;
    opacity: 0;
    transition: opacity 0.7s ease-in-out;
  min-height: 100vh;
    flex-direction: column;
}




:root {
    --contenitore-width: 1425px; /* Valore di fallback più realistico */
    --img-width: 1425px; /* Valore di fallback più realistico */

    --img-col1: 692px;
    --img-col2: 499px;
    --font-size-header: 3rem;
    --font-size-tstutil: 1.5rem;
    --font-size-funztit: 2.2rem;
    --font-size-funzion: 1.5rem;


}



.contenitoremax {
    display: flex;
    flex-direction: column;
    justify-content: center;
 align-items: center;
   width: var(--contenitore-width);
    margin: 0 auto; /* Lo mantiene centrato */
    background-color: yellow;
     position: absolute;
    top: 0;
}

* {
font-family: 'Helvetica', 'Arial', sans-serif;
margin: 0;
padding: 0;
 box-sizing: border-box;
}



header {
    display: flex;
justify-content: center;
align-items: center;
    font-weight: bold;
    color: #FFCF00;
    background-color: #013642;
    margin-bottom: 1rem;
 width: 100%;
// max-width: var(--img-width);
padding: 1rem 0 1rem 0;
    }

header span {
font-size: var(--font-size-header);
}

.nowrap {
    white-space: nowrap;
font-size: var(--font-size-header);
}

.multi-line {
    white-space: normal;
    display: block;
    text-align: center;
}

 .immagine-container {
  width: 100%;
      height: auto;
    margin: 0; 
    padding: 0; 
    // background-color: #000601; /* Placeholder fino al caricamento */
    overflow: auto;

      text-align: center; /* Centra orizzontalmente */
}

.immagine-container img {
    display: block;
width: var(--img-width);

// width: 1423px;

   height: auto; 
margin: 0 auto;
   // border-top: calc(0.6rem / var(--zoom)) solid #a10211;
   // border-bottom: calc(0.6rem / var(--zoom)) solid #a10211;
    border-top-style: solid;
    border-top-color: #a10211;
    border-bottom-style: solid;
    border-bottom-color: #a10211;
    padding: 0; 

}


.utilizzo {
// max-width: var(--img-width);
width: 100%;
font-weight: bold;
    display: flex;
align-items: center;
color: white;
background-color: #013642;
 padding: 0.5rem 1.5rem 0.5rem 1.5rem;
margin: 1rem 0 2rem 0;
}


.tstutil {
 text-align: justify;
font-size: var(--font-size-tstutil);
 will-change: transform, opacity;
  hyphens: auto;
  word-break: break-word;
}

.funzionalità {
margin: 3vw 6vw 3.3vw 6vw; 
border-top: calc(0.8rem / var(--zoom)) solid red;
box-sizing: border-box;
}

.funzionalità p.titolo {
font-size: var(--font-size-funztit, 2.2rem); 
font-weight: 900;
color: #025669;
}

.funzionalità p, .testospieg p {
 font-size: var(--font-size-funzion, 1.5rem); 
text-align: justify;
// margin-top: 0.4rem;

margin-top: calc(0.4rem / var(--zoom));
  hyphens: auto;
  word-break: break-word;
}

.doppio {
    display: flex;
    width: 90%;
 align-items: flex-start;
    }

.colonna1 {
    width: 55%;
    overflow: auto;
}

.separatore {
    width: 5%; /* Div centrale per stabilizzare la struttura */
height: 20px;
background-color: green;
}

.colonna2 {
     width: 40%;
        overflow: auto;
}

.colonna1 img {
    display: block;
width: var(--img-col1);
    height: auto;
 // border: calc(8px / var(--zoom)) solid #a10211;
    border-style: solid;
    border-color: #a10211;
margin: 0 auto;
}

.colonna2 img {
    display: block;
width: var(--img-col2);
    height: auto;
// border: calc(8px / var(--zoom)) solid #a10211;
    border-style: solid;
    border-color: #a10211;

margin: 0 auto;
}

.prova {
    display: block;
width: 80%;
height: 200px;
 border: 0.6rem solid #a10211;
background-color: green;
}

    </style>
</head>
<body>

<div class="contenitoremax">

   <header>  <span>- Simulatore di device per <span class="nowrap">Siti responsive -</span></span></header>

 <div class="immagine-container">
<img src="device-min-min.webp" alt="Descrizione dell'immagine">
    </div>


<div class="utilizzo">
<p class="tstutil">Per il miglior utilizzo, accedere al sito esclusivamente da un PC desktop o laptop.</br>
Questo strumento è pensato per simulare dispositivi mobili e non è utilizzabile su smartphone o tablet.</p>
</div>


<div class="doppio">
    <div class="colonna1">
        <img src="device-min-min.webp" alt="Descrizione dell'immagine">
    </div>
<div class="separatore"></div>
    <div class="colonna2">
        <img src="device-min-min.webp" alt="Descrizione dell'immagine">
    </div>
</div>


<div class="funzionalità">
  <p class="titolo">Introduzione alla Teoria dei Pixel e del Rendering Grafico</p>
  <p>Questa pagina è dedicata alla comprensione delle basi tecniche che influenzano la visualizzazione dei siti web sui diversi dispositivi.</p> 
  <p>Comprendere questi concetti ti consentirà di progettare siti web ottimizzati per garantire un’esperienza utente eccellente su qualsiasi schermo.</p>
  <p>Affronteremo concetti fondamentali come i pixel reali e i pixel CSS, la risoluzione dello schermo, il rapporto d'aspetto, il PPI e il Device Pixel Ratio (DPR), oltre a concetti correlati come anti-aliasing e interpolazione.</p>
  <p>Queste conoscenze non solo ti aiuteranno a ottimizzare il design responsivo, ma ti permetteranno anche di comprendere come i dispositivi e i browser interpretano e gestiscono i contenuti grafici.</p>
</div>



<div class="prova">ciaooooooooooo</div>

</div>



<script>


const ResponsiveManager = {

    CLIENT_WIDTH_RIFERIMENTO: 1425,

    BORDI_BASE: {
        '.immagine-container img': 9, // 0.6rem → 9.6px
        '.colonna1 img': 8,
        '.colonna2 img': 6
    },

    bordiSalvati: {},


    fontSizeMap: [
        [7000, 1441, 3, 1.5, 2.2, 1.5],
        [1440, 1361, 3, 1.5, 2.2, 1.5], [1360, 1280, 2.8, 1.4, 2.1, 1.5],
        [1279, 1195, 2.6, 1.4, 2.0, 1.4], [1194, 1111, 2.5, 1.2, 1.9, 1.4],
        [1110, 1024, 2.4, 1.3, 1.7, 1.4], [1023, 939, 2.3, 1.2, 1.6, 1.4],
        [938, 852, 2.2, 1.1, 1.5, 1.3], [851, 768, 2.0, 1.0, 1.5, 1.2],
        [767, 685, 1.8, 1.0, 1.5, 1.2], [684, 600, 1.7, 1.0, 1.5, 1.1],
        [599, 541, 1.6, 0.9, 1.5, 1.1], [540, 480, 1.5, 0.87, 1.4, 1.1],
        [479, 400, 1.5, 0.8, 1.5, 1.0], [399, 341, 1.5, 0.75, 1.5, 0.9],
        [340, 291, 1.4, 0.7, 1.5, 0.9], [290, 256, 1.1, 0.67, 1.5, 0.9],
        [255, 220, 1.0, 0.63, 1.5, 0.9], [219, 200, 0.8, 0.6, 1.5, 0.9],
        [199, 160, 0.7, 0.55, 1.5, 0.9], [159, 145, 0.6, 0.55, 1.5, 0.9],
        [144, 120, 0.5, 0.5, 1.5, 0.9], [119, 95, 0.4, 0.5, 1.5, 0.8],
        [94, 75, 0.3, 0.4, 1.5, 0.7], [74, 49, 0.2, 0.3, 1.5, 0.5]
    ],


    aggiornaFont() {
        const larghezzaBody = document.documentElement.clientWidth;
        const range = this.fontSizeMap.find(([max, min]) => larghezzaBody <= max && larghezzaBody >= min);
        
        if (range) {
            const [max, min, headerSize, tstutilSize, funztitSize, funzionSize] = range;
            document.documentElement.style.setProperty('--font-size-header', `${headerSize}rem`);
            document.documentElement.style.setProperty('--font-size-tstutil', `${tstutilSize}rem`);
            document.documentElement.style.setProperty('--font-size-funztit', `${funztitSize}rem`);
            document.documentElement.style.setProperty('--font-size-funzion', `${funzionSize}rem`);
        }
    },

    aggiornaMultiLine() {
        document.querySelector(".nowrap")?.classList.toggle("multi-line", document.documentElement.clientWidth <= 640);
// console.log("sono la multilinea");
    },



    DPR_NATIVO: null,
    ultimoClientWidth: null,
    ultimoZoom: null,

    getDPRNativo() {
        let dprSalvato = localStorage.getItem('DPR_NATIVO');
        return dprSalvato ? parseFloat(dprSalvato) : (localStorage.setItem('DPR_NATIVO', window.devicePixelRatio), window.devicePixelRatio);
    },


    calcolaZoom() {
        return Math.round((window.devicePixelRatio / this.DPR_NATIVO) * 100);
    },


    aggiornaLarghezzaContenitore() {
        let zoomAttuale = this.calcolaZoom();
        let clientWidthAttuale = document.documentElement.clientWidth;
        let diffzoom = Math.round(zoomAttuale - 100);
        let zoomadattato = Math.round(zoomAttuale - (diffzoom / 1.2));

        let larghezzaContenitore = clientWidthAttuale * 0.9;  
        let imgCol1 = Math.round(larghezzaContenitore * 0.52);
        let imgCol2 = Math.round(larghezzaContenitore * 0.38);

        let imgCol1add = Math.round(imgCol1 * (zoomadattato / 100));
        let imgCol2add = Math.round(imgCol2 * (zoomadattato / 100));
      
        console.log(`Larghezza ultima: ${this.ultimoClientWidth}px | Larghezza attuale: ${clientWidthAttuale}px`);
        console.log(`Ultimo zoom: ${this.ultimoZoom}% | Zoom attuale1: ${zoomAttuale}%`);

 if (zoomAttuale > 100) {
     console.log("PRIMO CASO");
            document.documentElement.style.setProperty('--contenitore-width', `${clientWidthAttuale}px`);
            document.documentElement.style.setProperty('--img-width', `${clientWidthAttuale * (zoomadattato / 100)}px`);
            document.documentElement.style.setProperty('--img-col1', `${imgCol1add}px`);
            document.documentElement.style.setProperty('--img-col2', `${imgCol2add}px`);

        } else if (zoomAttuale === 100) {   
     console.log("SECONDO CASO");
            document.documentElement.style.setProperty('--contenitore-width', `${clientWidthAttuale}px`);
            document.documentElement.style.setProperty('--img-width', `${clientWidthAttuale}px`);
            document.documentElement.style.setProperty('--img-col1', `${imgCol1}px`);
            document.documentElement.style.setProperty('--img-col2', `${imgCol2}px`);

       } else if (zoomAttuale < 100) { 
     console.log("TERZO CASO");
            let larghezzaMin = Math.round(clientWidthAttuale * (zoomAttuale / 100)); 
            let imgCol1Min = Math.round(imgCol1 * (zoomAttuale / 100)); 
            let imgCol2Min = Math.round(imgCol2 * (zoomAttuale / 100));    

            document.documentElement.style.setProperty('--contenitore-width', `${larghezzaMin}px`);
            document.documentElement.style.setProperty('--img-width', `${larghezzaMin}px`);
            document.documentElement.style.setProperty('--img-col1', `${imgCol1Min}px`);
            document.documentElement.style.setProperty('--img-col2', `${imgCol2Min}px`);

        } 

        this.ultimoClientWidth = clientWidthAttuale;
console.log("ed adesso è", this.ultimoClientWidth);

        this.ultimoZoom = zoomAttuale;
 },



verificaBordiDuranteZoom() {
    let zoomAttuale = this.calcolaZoom();
    let clientWidthAttuale = document.documentElement.clientWidth;

    console.log(`🔎 Zoom attuale: ${zoomAttuale}% | Viewport attuale: ${clientWidthAttuale}px`);

    // 🔹 BLOCCO 1 → Zoom < 100
    if (zoomAttuale < 100) {
        Object.entries(this.BORDI_BASE).forEach(([selettore, bordoBase]) => {
            document.querySelectorAll(selettore).forEach(elemento => {
                
                // 🔹 Se viewport < 1425 → Riduciamo ulteriormente il bordo
            let rapporto = (clientWidthAttuale / 1425);
            let bordoCorretto = (clientWidthAttuale < 1425) 
                ? bordoBase * (0.5 + 0.5 * rapporto) 
                : bordoBase;

                if (selettore === '.immagine-container img') {
                    elemento.style.borderTopWidth = `${bordoCorretto}px`;
                    elemento.style.borderBottomWidth = `${bordoCorretto}px`;

                    console.log(`✅ ${selettore} → Bordo superiore/inferiore fissato a ${bordoCorretto.toFixed(2)}px`);

                } else if (selettore === '.colonna1 img') {
                    elemento.style.borderWidth = `${bordoCorretto}px`;

                    console.log(`✅ ${selettore} → Bordo fissato a ${bordoCorretto.toFixed(2)}px`);

                } else if (selettore === '.colonna2 img') {
                    elemento.style.borderWidth = `${bordoCorretto}px`;

                    console.log(`✅ ${selettore} → Bordo fissato a ${bordoCorretto.toFixed(2)}px`);
                }
            });
        });

        return; // 🔹 Interrompe il flusso dopo aver completato questo blocco
    }


// 🔹 BLOCCO 2 → Zoom = 100
if (zoomAttuale === 100) {
    let clientWidthAttuale = document.documentElement.clientWidth;

    Object.entries(this.BORDI_BASE).forEach(([selettore, bordoBase]) => {
        document.querySelectorAll(selettore).forEach(elemento => {
            
                // 🔹 Se viewport < 1425 → Riduciamo ulteriormente il bordo
            let rapporto = (clientWidthAttuale / 1425);
            let bordoCorretto = (clientWidthAttuale < 1425) 
                ? bordoBase * (0.5 + 0.5 * rapporto) 
                : bordoBase;

            if (selettore === '.immagine-container img') {
                elemento.style.borderTopWidth = `${bordoCorretto}px`;
                elemento.style.borderBottomWidth = `${bordoCorretto}px`;

                console.log(`✅ ${selettore} → Bordo superiore/inferiore fissato a ${bordoCorretto.toFixed(2)}px`);

            } else if (selettore === '.colonna1 img') {
                elemento.style.borderWidth = `${bordoCorretto}px`;

                console.log(`✅ ${selettore} → Bordo fissato a ${bordoCorretto.toFixed(2)}px`);

            } else if (selettore === '.colonna2 img') {
                elemento.style.borderWidth = `${bordoCorretto}px`;

                console.log(`✅ ${selettore} → Bordo fissato a ${bordoCorretto.toFixed(2)}px`);
            }
        });
    });

    return; // 🔹 Interrompe il flusso dopo aver completato questo blocco
}



// 🔹 BLOCCO 3 → Zoom > 100
if (zoomAttuale > 100) {
    let clientWidthAttuale = document.documentElement.clientWidth;
    let viewportStimato = clientWidthAttuale * (zoomAttuale / 100);  // Valore teorico del viewport a tutto schermo

    let rapportoResize = clientWidthAttuale / (1425 / (zoomAttuale / 100));

    // Applica attenuazione lineare (puoi regolare il 0.5 a piacere)
    let fattoreResize = (viewportStimato !== 1425) 
        ? (0.5 + 0.5 * rapportoResize)  // Attenuazione lineare
        : 1;

    Object.entries(this.BORDI_BASE).forEach(([selettore, bordoBase]) => {
        document.querySelectorAll(selettore).forEach(elemento => {

            let rapportoResize = clientWidthAttuale / (1425 / (zoomAttuale / 100));
            let nuovoBordo = (bordoBase / (zoomAttuale / 100)) * fattoreResize;


            if (selettore === '.immagine-container img') {
                elemento.style.borderTopWidth = `${nuovoBordo}px`;
                elemento.style.borderBottomWidth = `${nuovoBordo}px`;

                console.log(`✅ ${selettore} → Bordo superiore/inferiore calcolato a ${nuovoBordo.toFixed(2)}px`);

            } else if (selettore === '.colonna1 img') {
                elemento.style.borderWidth = `${nuovoBordo}px`;

                console.log(`✅ ${selettore} → Bordo calcolato a ${nuovoBordo.toFixed(2)}px`);

            } else if (selettore === '.colonna2 img') {
                elemento.style.borderWidth = `${nuovoBordo}px`;

                console.log(`✅ ${selettore} → Bordo calcolato a ${nuovoBordo.toFixed(2)}px`);
            }
        });
    });

    return; // 🔹 Interrompe il flusso dopo aver completato questo blocco
}

},








    start() {

        this.DPR_NATIVO = this.getDPRNativo();
        this.ultimoZoom = this.calcolaZoom();


        window.addEventListener("load", () => {
            requestIdleCallback(() => {
this.ultimoClientWidth = document.documentElement.clientWidth;
 // this.impostaBordiIniziali();
this.verificaBordiDuranteZoom();
this.aggiornaLarghezzaContenitore();
                this.aggiornaFont();
                this.aggiornaMultiLine();
                document.body.style.opacity = "1";
            });
        });

        window.addEventListener("resize", () => {
            this.aggiornaLarghezzaContenitore();
// this.impostaBordiIniziali();
this.verificaBordiDuranteZoom();
                this.aggiornaFont();
                this.aggiornaMultiLine();
        });

        this.fontSizeMap.forEach(([max, min]) => {
            window.matchMedia(`(min-width: ${min}px) and (max-width: ${max}px)`).addEventListener("change", () => {
                this.aggiornaFont();
                this.aggiornaMultiLine();
            });
        });

    }
};

// Avvio del sistema
ResponsiveManager.start();


// se ho la finestra ridimensionata con zoom diverso basta fare il clientwidth x il device e si ha la finestra effettiva, come fosse a zoom 100. 


</script>







</body>
</html>


