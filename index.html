<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Teoria sulle Misure Responsive</title>
 

<style>

html {font-size: 100%; scroll-behavior: smooth;  scroll-padding-top: 1rem;}

body {
    display: flex;
justify-content: center;
align-items: center;
width: 100%;
height: 100%;
color: #333;
line-height: 1.3;
background-color: white;
    opacity: 0;
    transition: opacity 0.7s ease-in-out;
 
}

:root {
    --img-width: 90rem; /* Fallback di sicurezza */
}


.contenitoremax {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin: 0 auto; /* Lo mantiene centrato */
    background-color: yellow;

}

* {
font-family: 'Helvetica', 'Arial', sans-serif;
margin: 0;
padding: 0;
box-sizing: border-box;
}



header {
    display: flex;
justify-content: center;
align-items: center;
    font-weight: bold;
    color: #FFCF00;
    background-color: #013642;
    margin-bottom: 1rem;
 width: 100%;
max-width: var(--img-width);
padding: 1rem 0 1rem 0;
    }

header span {
font-size: var(--font-size-header);
}

.nowrap {
    white-space: nowrap;
font-size: var(--font-size-header);
}

.multi-line {
    white-space: normal;
    display: block;
    text-align: center;
}

 .immagine-container {
  width: 100%;
      height: auto;
    margin: 0; 
    padding: 0; 
    // background-color: #000601; /* Placeholder fino al caricamento */
      overflow: auto;
      text-align: center; /* Centra orizzontalmente */
}

.immagine-container img {
    display: block;
width: var(--img-width);
   height: auto; 
margin: 0 auto;
    border-top: 0.6rem solid #a10211;
    border-bottom: 0.6rem solid #a10211;
}


.utilizzo {
max-width: var(--img-width);
width: 100%;
font-weight: bold;
    display: flex;
align-items: center;
color: white;
background-color: #013642;
padding: 0.5rem 1.5rem 0.5rem 1.5rem;
margin: 1rem 0 2rem 0;
}


.tstutil {
 text-align: justify;
font-size: var(--font-size-tstutil);
 will-change: transform, opacity;
  hyphens: auto;
  word-break: break-word;
}

    </style>
</head>
<body>

<div class="contenitoremax">

   <header>  <span>- Simulatore di device per <span class="nowrap">Siti responsive -</span></span></header>

 <div class="immagine-container">
<img src="device-min-min.webp" alt="Descrizione dell'immagine">
    </div>


<div class="utilizzo">
<p class="tstutil">Per il miglior utilizzo, accedere al sito esclusivamente da un PC desktop o laptop.</br>
Questo strumento Ã¨ pensato per simulare dispositivi mobili e non Ã¨ utilizzabile su smartphone o tablet.</p>
</div>

</div>
<script>

document.addEventListener("DOMContentLoaded", function() {
      const container = document.querySelector('.contenitoremax');
    const immaginecont = document.querySelector('.immagine-container');
    const immagine = document.querySelector('.immagine-container img');

      // Ottenere il valore reale di clientWidth e innerWidth
      const clientWidth = document.documentElement.clientWidth;

      // Controllare se lo zoom NON Ã¨ al 100%
      const zoomLevel = window.outerWidth / window.innerWidth;
      console.log(zoomLevel);

      if (zoomLevel === 1) {
        // Se lo zoom Ã¨ 100%, calcola e salva la larghezza
        const remInPixels = parseFloat(getComputedStyle(document.documentElement).fontSize);
        const widthInRem = clientWidth / remInPixels;

        // Salva la larghezza nel LocalStorage
        localStorage.setItem('contenitoreWidth', widthInRem);

        // Imposta la larghezza
        document.documentElement.style.setProperty('--img-width', widthInRem + "rem");

        console.log(`Larghezza impostata a ${widthInRem}rem e salvata nel LocalStorage.`);
      } else {
        // Se lo zoom NON Ã¨ 100%, recupera la larghezza salvata
        const storedWidth = localStorage.getItem('contenitoreWidth');

        if (storedWidth) {
          // Se esiste una larghezza salvata, la usiamo
          document.documentElement.style.setProperty('--img-width', storedWidth + "rem");
          console.log(`Zoom non al 100%. Recuperata larghezza salvata: ${storedWidth}rem.`);
        } else {
          // Se nessuna larghezza Ã¨ salvata (prima visita), lasciamo il valore CSS
          console.warn("Zoom non al 100% e nessuna larghezza salvata. Usando larghezza di default.");
        }
      }
    });

// Mappa delle dimensioni del font per ogni intervallo
const fontSizeMap = [
                                   [7000, 1441, 3, 1.5, 2.2, 1.5],
    [1440, 1361, 3, 1.5, 2.2, 1.5], [1360, 1280, 2.8, 1.4, 2.1, 1.5],
    [1279, 1195, 2.6, 1.4, 2.0, 1.4], [1194, 1111, 2.5, 1.2, 1.9, 1.4],
    [1110, 1024, 2.4, 1.3, 1.7, 1.4], [1023, 939, 2.3, 1.2, 1.6, 1.4],
    [938, 852, 2.2, 1.1, 1.5, 1.3], [851, 768, 2.0, 1.0, 1.5, 1.2],
    [767, 685, 1.8, 1.0, 1.5, 1.2], [684, 600, 1.7, 1.0, 1.5, 1.1],
    [599, 541, 1.6, 0.9, 1.5, 1.1], [540, 480, 1.5, 0.87, 1.4, 1.1],
    [479, 400, 1.5, 0.8, 1.5, 1.0], [399, 341, 1.5, 0.75, 1.5, 0.9],
    [340, 291, 1.4, 0.7, 1.5, 0.9], [290, 256, 1.1, 0.67, 1.5, 0.9],
    [255, 220, 1.0, 0.63, 1.5, 0.9], [219, 200, 0.8, 0.6, 1.5, 0.9],
    [199, 160, 0.7, 0.55, 1.5, 0.9], [159, 145, 0.6, 0.55, 1.5, 0.9],
    [144, 120, 0.5, 0.5, 1.5, 0.9], [119, 95, 0.4, 0.5, 1.5, 0.8], 
    [94, 75, 0.3, 0.4, 1.5, 0.7], [74, 49, 0.2, 0.3, 1.5, 0.5]
];


// Ultima larghezza registrata per evitare doppie stampe
let lastBodyWidth = null;

// Funzione per aggiornare i font in base alla larghezza del body
function aggiornaFont(min, max) {
    const larghezzaBody = document.documentElement.clientWidth;
   // console.clear();
    console.log(`ðŸ”„ Larghezza attuale: ${larghezzaBody}px | Range attivo: ${min}px - ${max}px`);

    for (const [rangeMax, rangeMin, headerSize, tstutilSize, funztitSize, funzionSize] of fontSizeMap) {
        if (larghezzaBody <= rangeMax && larghezzaBody >= rangeMin) {
            document.documentElement.style.setProperty('--font-size-header', `${headerSize}rem`);
            document.documentElement.style.setProperty('--font-size-tstutil', `${tstutilSize}rem`);
            document.documentElement.style.setProperty('--font-size-funztit', `${funztitSize}rem`);
            document.documentElement.style.setProperty('--font-size-funzion', `${funzionSize}rem`);
            break;
        }
    }
}



window.addEventListener("load", () => {
    requestIdleCallback(() => { // Esegue solo quando il browser Ã¨ pronto
        const larghezzaBody = document.documentElement.clientWidth;
        const intervalloAttuale = fontSizeMap.find(([max, min]) => larghezzaBody <= max && larghezzaBody >= min);

        if (intervalloAttuale) {
            const [max, min] = intervalloAttuale;
            aggiornaFont(min, max);
        } else {
            console.warn("âŒ Nessun intervallo trovato per questa larghezza!");
        }

        aggiornaMultiLine();
        document.body.style.opacity = "1"; // Mostra il sito dopo il calcolo
    });
});



fontSizeMap.forEach(([max, min]) => {
    const mediaQuery = window.matchMedia(`(min-width: ${min}px) and (max-width: ${max}px)`);
    
    mediaQuery.addEventListener("change", (e) => {
        if (e.matches) {
            aggiornaFont(min, max); // Passiamo il range attivo a aggiornaFont
            aggiornaMultiLine();
        }
    });
});

function aggiornaMultiLine() {
    const larghezzaBody = document.documentElement.clientWidth;
    document.querySelector(".nowrap")?.classList.toggle("multi-line", larghezzaBody <= 640);
}





</script>







</body>
</html>


